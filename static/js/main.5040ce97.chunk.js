(this["webpackJsonpminiapp-example"]=this["webpackJsonpminiapp-example"]||[]).push([[1],[,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d}));var n=a(6),c=a(9),r=a(46),i=a(152);function s(e){return JSON.stringify(e,Object.keys(e).sort())}function l(e){return JSON.parse(e)}function o(e){var t=new Date;t.setHours(0,0,0,0);var a=t.getTime();return Object.keys(e).filter(e=>"_persist"!==e).reduce((t,n)=>(t[n]=Object.keys(e[n]).reduce((t,c)=>{var{date:i}=l(c);if(!i)return t[c]=e[n][c],t;var s=Object(r.parse)(i).getTime();return a<=s&&(t[c]=e[n][c]),t},{}),t),{})}function u(e,t){return Object(n.a)({},t,{storage:Object(i.a)({name:"miniapp-example",storeName:"redux-persist"}),key:e,serialize:!1,deserialize:!1,version:3,migrate:(e,t)=>{var a=(e&&e._persist.version)===t?e:void 0;return Promise.resolve(a)},timeout:1e4})}function d(e){return Object(c.a)((t,a)=>"ui"===a?e:t)}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var n=a(0),c=a.n(n),r=a(90),i=a.n(r),s=({className:e,width:t,height:a})=>c.a.createElement("div",{className:o(i.a.rect,e),style:{width:t,height:a}}),l=({className:e,width:t,size:a})=>c.a.createElement("div",{className:o(i.a.text,e),style:{width:t,height:a}});function o(...e){return e.filter(Boolean).join(" ")}},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"b",(function(){return m})),a.d(t,"i",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return v})),a.d(t,"h",(function(){return y})),a.d(t,"j",(function(){return _})),a.d(t,"f",(function(){return g}));var n=a(6),c=a(4),r=a(70),i={name:"\u041c\u043e\u0441\u043a\u0432\u0430",geoid:213,longitude:37.611347,latitude:55.760241};function s(e){return Object.keys(e).map(t=>{var a=encodeURIComponent(t);return Array.isArray(e[t])?e[t].map(e=>"".concat(a,"=").concat(encodeURIComponent(e))).join("&"):"".concat(a,"=").concat(encodeURIComponent(e[t].toString()))}).join("&")}function l(e,t,a){return o.apply(this,arguments)}function o(){return(o=Object(c.a)((function*(e,t,a){var n=yield fetch(["/miniapp-example",e,t?"?"+s(t):""].join(""),{signal:a});return n.ok?n.json():Promise.reject(n)}))).apply(this,arguments)}function u(e){return l("/api/event/".concat(e,".json"))}function d(e,t){return l("/api/rubric-events/".concat(e,".json"),t)}function m(e){return l("/api/actual-events.json",e)}function b(e){return l("/api/selections.json",e)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)((function*(e){var t=(yield v()).cities.map(t=>{var a=Object(r.b)(e.latitude,e.longitude,t.latitude,t.longitude);return Object(n.a)({},t,{distance:a})}),a=1/0;return{cityInfo:t.reduce((e,t)=>t.distance<a?(a=t.distance,delete t.distance,t):e,Object(n.a)({},i,{eventsMenu:[]}))}}))).apply(this,arguments)}function v(){return l("/api/city-list.json")}function y(e,t){return l("/api/selection-events/".concat(e,".json"),t)}function _(e,t,a){return l("/api/suggest.json",{text:e,geoid:t},a)}function g(e){return l("/api/recommended-events.json",e)}},,function(e,t,a){e.exports={image:"styles_image__Xibal","button-wrapper":"styles_button-wrapper__1xmRh",button:"styles_button__3ugFI","date-1":"styles_date-1__1KrEV","date-2":"styles_date-2__u1uuX",map:"styles_map__1GZMr","place-1":"styles_place-1__2BRJQ","place-2":"styles_place-2__1cKpq",gallery:"styles_gallery__33Vja","gallery-header":"styles_gallery-header__2mb0M","gallery-content":"styles_gallery-content__3RMTY","gallery-card":"styles_gallery-card__1qkm9",description:"styles_description__hdSqE","description-line-1":"styles_description-line-1__26Xb3","description-line-2":"styles_description-line-2__20hRv","description-line-3":"styles_description-line-3__1VXVh","description-line-4":"styles_description-line-4__2BYM0","description-line-5":"styles_description-line-5__3aCps",recommended:"styles_recommended__3JCFj"}},,,,function(e,t,a){"use strict";a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return p}));var n=a(4),c=a(8),r=a(9),i=a(10),s=a(2),l={data:{},ui:{}},o=Object(c.b)({name:"event",initialState:l,reducers:{fetchStart(e,t){var{id:a}=t.payload;e.data[a]||(e.data[a]={event:null,schedule:null,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].event?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{id:a,event:n}=t.payload;e.data[a].event=n.event,e.data[a].schedule=n.scheduleInfo,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{id:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},setEvents(e,t){var{events:a}=t.payload;a.forEach(t=>{if(t){var{id:a}=t.event;e.data[a]||(e.data[a]={event:null,schedule:null,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].event=t.event,e.data[a].schedule=t.scheduleInfo,e.data[a].updatedAt=Date.now()}})}}}),{fetchStart:u,fetchSuccess:d,fetchError:m,setEvents:b}=o.actions,p=e=>function(){var t=Object(n.a)((function*(t,a){var n=a().event.data[e];if(!(n&&n.updatedAt+3e5>Date.now())){t(u({id:e}));try{var c=yield Object(i.e)(e);t(d({id:e,event:c}))}catch(r){console.error(r),t(m({id:e,error:r}))}}}));return function(e,a){return t.apply(this,arguments)}}(),f=Object(s.b)("events",{transforms:[Object(s.c)(l.ui)]});t.a=Object(r.b)(f,o.reducer)},,,,function(e,t,a){e.exports={"page-header":"styles_page-header__3SRj-","page-header_clear":"styles_page-header_clear__1-0qG","menu-button":"styles_menu-button__27a1S","backward-button":"styles_backward-button__1gLVd","burger-menu-icon":"styles_burger-menu-icon__30H4q",logo:"styles_logo__3HQmN","suggest-button":"styles_suggest-button__jwrxc","suggest-icon":"styles_suggest-icon__YMWw5","icon-white":"styles_icon-white__3C4HZ","icon-black":"styles_icon-black__3s7hW"}},function(e,t,a){e.exports={screen:"styles_screen__3Xc2f",hidden:"styles_hidden__319gL",screenEnter:"styles_screenEnter__1cDTX",screenEnterActive:"styles_screenEnterActive__3Aipd",screenExit:"styles_screenExit__16_m_",screenExitActive:"styles_screenExitActive__9q_ED",offset:"styles_offset__3ZkO6"}},function(e,t,a){e.exports={wrapper:"styles_wrapper__1LBcn",wrapper_loading:"styles_wrapper_loading__3wiy0","wrapper-visible_yes":"styles_wrapper-visible_yes__1gZE6",slideUp:"styles_slideUp__ugjBN","wrapper-visible_no":"styles_wrapper-visible_no__3CTrI",slideDown:"styles_slideDown__1-rC7",title:"styles_title__2H0i0","auto-select-box":"styles_auto-select-box__1KSTl",selected:"styles_selected__3i7jO","selected-city-label":"styles_selected-city-label__107bE","selected-city-name":"styles_selected-city-name__3y9wk",button:"styles_button__32WSn"}},function(e,t,a){"use strict";function n(){return"/"}function c(e){return"/event/".concat(e)}function r(e){return"/events/".concat(encodeURIComponent(e))}function i(e){return"/selection/".concat(encodeURIComponent(e))}function s(){return"/search"}a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return s}))},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));var n=a(8),c=a(9),r=a(2),i=Object(n.b)({name:"menu",initialState:{visible:!1,items:[],activeItem:""},reducers:{setItems(e,t){e.items=t.payload},setVisible(e,t){e.visible=t.payload}}}),{setItems:s,setVisible:l}=i.actions,o=Object(r.b)("menu");t.a=Object(c.b)(o,i.reducer)},,,function(e,t,a){e.exports={card:"style_card__2T-VX",title:"style_title__RuqCf",annotation:"style_annotation__n8doS","image-wrapper":"style_image-wrapper__3JJK-","image-overlay":"style_image-overlay__29ffx",image:"style_image__Lux1b",preview:"style_preview__3loTl"}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=()=>(/iPad|iPhone|iPod/.test(navigator.platform)||/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),c=e=>Object(n.lazy)(()=>Promise.all([new Promise(t=>setTimeout(()=>t(e()),50)),new Promise(e=>setTimeout(e,500))]).then(([e])=>e))},,,,,,function(e,t,a){e.exports={feed:"styles_feed__RntQS",title:"styles_title__2JRen",events:"styles_events___mJxb",item:"styles_item__2O9gA"}},function(e,t,a){e.exports={container:"styles_container__2LqZR",avatar:"styles_avatar__1qTlr","avatar-image":"styles_avatar-image__2x2wh",stub:"styles_stub__vgW5R",username:"styles_username__MPrq4"}},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(53),i=a(157),s=a.n(i);t.a=({itemsGap:e=r.a,count:t,card:a})=>c.a.createElement("div",{className:s.a.events,style:{gridGap:"".concat(e,"px")}},Array(t).fill(0).map((e,t)=>c.a.createElement(a,{key:t})))},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(0),c=a(43);function r(e){var t=Object(n.useContext)(c.a).onBackward;return Object(n.useMemo)(()=>t.bind(null,e),[t,e])}function i(){return Object(n.useContext)(c.a).ref}},,function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"c",(function(){return v}));var n=a(4),c=a(6),r=a(8),i=a(9),s=a(10),l=a(2),o={data:{},ui:{}},u=Object(r.b)({name:"selections",initialState:o,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={items:[],updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,items:n}=t.payload,c=[];for(var r of n)r&&c.push({code:r.code,title:r.title,count:r.count,image:r.events&&r.events[0]&&r.events[0].eventPreview&&r.events[0].eventPreview.image});e.data[a].items=c,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:d,fetchSuccess:m,fetchError:b}=u.actions,p=e=>{var t=Object(l.a)(Object(c.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.data[t]},f=e=>{var t=Object(l.a)(Object(c.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.selections.ui[t]},v=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var r=Object(l.a)(Object(c.a)({geoid:t},e)),i=n().selections.data[r];if(!(i&&i.updatedAt+3e5>Date.now())){a(d({key:r}));try{var o=yield Object(s.i)(Object(c.a)({},e,{geoid:t}));a(m({key:r,items:o.selections}))}catch(u){console.error(u),a(b({key:r,error:u}))}}}));return function(e,t){return a.apply(this,arguments)}}(),y=Object(l.b)("selections",{stateReconciler:l.e,transforms:[Object(l.c)(o.ui)]});t.a=Object(i.b)(y,u.reducer)},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(3),i=a(18),s=a(26),l=a(24),o=a(23),u=a(71),d=a(51),m=a(20),b=a.n(m),p=()=>c.a.createElement(i.b,{to:Object(o.b)(),className:b.a.logo},"MiniApp Example"),f=({fill:e="black"})=>{var t=[b.a["suggest-icon"],b.a["icon-".concat(e)]].join(" ");return c.a.createElement("span",{className:t})};function v(e,t){return t?"".concat(b.a[e]," ").concat(b.a["".concat(e,"_").concat(t)]):b.a[e]}t.a=Object(n.memo)(e=>{var{hasMenu:t,hasLogo:a,backward:i,mods:m}=e,y=Object(s.d)(),_=Object(r.b)(),g=Object(n.useCallback)(()=>{y.push(Object(o.d)())},[y]),h=Object(n.useCallback)(()=>{_(Object(l.c)(!0))},[_]);return c.a.createElement("header",{className:v("page-header",m)},Boolean(i)&&c.a.createElement(u.a,{className:b.a["backward-button"],fill:i||"black"}),Boolean(t)&&c.a.createElement(d.a,{className:b.a["menu-button"],onClick:h},c.a.createElement("span",{className:b.a["burger-menu-icon"]})),a&&c.a.createElement(p,null),c.a.createElement(d.a,{className:b.a["suggest-button"],onClick:g},c.a.createElement(f,{fill:m?"white":"black"})))})},,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),c=Object(n.createContext)({onBackward:()=>{},isVisible:!1,ref:Object(n.createRef)()})},function(e,t,a){e.exports={card:"styles_card__2krq5",image:"styles_image__3rHyi",right:"styles_right__3yAG9",title:"styles_title__1qP6K",description:"styles_description__2Ze_3"}},function(e,t,a){e.exports={input:"styles_input__ldYiA",wrapper:"styles_wrapper__1qFlf","wrapper-visible_yes":"styles_wrapper-visible_yes__3Xlii",slideUp:"styles_slideUp__2GPyJ","wrapper-visible_no":"styles_wrapper-visible_no__2Kq0Z",slideDown:"styles_slideDown__3yIqZ","city-list":"styles_city-list__2FmDB","city-item":"styles_city-item__TNmcc"}},,,,,,function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(155),i=a.n(r);t.a=({className:e,children:t,onClick:a})=>{var n=[i.a.clear,e].filter(Boolean).join(" ");return c.a.createElement("button",{className:n,onClick:a},t)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=18},function(e,t,a){e.exports={card:"styles_card__eFyRm",image:"styles_image__1XdLR",title:"styles_title__2aX7M",description:"styles_description__hf2zy"}},function(e,t,a){e.exports={container:"styles_container__2ZLnU",image:"styles_image__1OXdh",stub:"styles_stub__2rGlh","stub-hidden":"styles_stub-hidden__wNOO_",fadeIn:"styles_fadeIn__Wb4n6"}},function(e,t,a){e.exports={title:"styles_title__1IJnF",events:"styles_events__3m_nB",event:"styles_event__15ocv",link:"styles_link__OwBgq"}},function(e,t,a){e.exports={list:"style_list__1E8sL",item:"style_item__2Gtnq",link:"style_link__5kR7b","active-item":"style_active-item__1n702"}},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(55),i=a.n(r);t.a=e=>{var t=e.bgColor||"#555",[a,r]=Object(n.useState)(!1),s=Object(n.useCallback)(()=>{e.src&&r(!0)},[r,e.src]),l=[i.a.stub,a&&i.a["stub-hidden"]].filter(Boolean).join(" "),o=[e.className,i.a.container].filter(Boolean).join(" ");return c.a.createElement("div",{className:o},c.a.createElement("img",{className:i.a.image,onLoad:s,src:e.src?e.src.url:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",srcSet:e.src2x?"".concat(e.src2x.url," 2x"):void 0,alt:e.alt}),c.a.createElement("div",{className:l,style:{backgroundColor:t}}))}},,,,,function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(5),i=a(44),s=a.n(i);t.a=()=>c.a.createElement("div",{className:s.a.card},c.a.createElement(r.a,{className:s.a.image}),c.a.createElement("div",{className:s.a.right},c.a.createElement(r.b,{className:s.a.title}),c.a.createElement(r.b,{className:s.a.description})))},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return v})),a.d(t,"d",(function(){return y}));var n=a(4),c=a(6),r=a(8),i=a(9),s=a(10),l=a(2),o=a(16),u={data:{},ui:{}},d=Object(r.b)({name:"actual-events",initialState:u,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={items:[],updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,items:n}=t.payload;e.data[a].items=n,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:m,fetchSuccess:b,fetchError:p}=d.actions,f=e=>{var t=Object(l.a)(Object(c.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.data[t]},v=e=>{var t=Object(l.a)(Object(c.a)({geoid:e.city.currentCity.geoid},e.dateFilter));return e.actualEvents.ui[t]},y=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var r=Object(l.a)(Object(c.a)({geoid:t},e)),i=n().actualEvents.data[r];if(!(i&&i.updatedAt+3e5>Date.now())){a(m({key:r}));try{var{events:u}=yield Object(s.b)(Object(c.a)({},e,{geoid:t}));u.prefetchItems&&(a(Object(o.c)({events:u.prefetchItems})),delete u.prefetchItems),a(b({key:r,items:u.items}))}catch(d){console.error(d),a(p({key:r,error:d}))}}}));return function(e,t){return a.apply(this,arguments)}}(),_=Object(l.b)("actual-events",{stateReconciler:l.e,transforms:[Object(l.c)(u.ui)]});t.c=Object(i.b)(_,d.reducer)},function(e,t,a){"use strict";a.d(t,"d",(function(){return _})),a.d(t,"e",(function(){return g})),a.d(t,"c",(function(){return h})),a.d(t,"b",(function(){return E}));var n=a(4),c=a(6),r=a(8),i=a(9),s=a(10),l=a(2),o=a(16),u={data:{},ui:{}},d=Object(r.b)({name:"rubric-events",initialState:u,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[a].events.items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,events:n,title:c}=t.payload;e.data[a].title=c,e.data[a].events=n,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchMoreStart(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!0},fetchMoreSuccess(e,t){var{key:a,events:n}=t.payload;e.data[a].events.items.push(...n.items),e.data[a].events.paging=n.paging,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoadingMore=!1},fetchMoreError(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!1}}}),{fetchStart:m,fetchSuccess:b,fetchError:p,fetchMoreStart:f,fetchMoreSuccess:v,fetchMoreError:y}=d.actions,_=e=>t=>{var a=Object(l.a)(Object(c.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.data[a]},g=e=>t=>{var a=Object(l.a)(Object(c.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.rubricEvents.ui[a]},h=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:r}=n().city.currentCity,i=Object(l.a)(Object(c.a)({geoid:r,code:e},t)),u=n().rubricEvents.data[i];if(!(u&&u.updatedAt+3e5>Date.now())){a(m({key:i}));try{var{title:d,events:f}=yield Object(s.g)(e,Object(c.a)({geoid:r,offset:0,limit:10},t));f.prefetchItems&&(a(Object(o.c)({events:f.prefetchItems})),delete f.prefetchItems),a(b({key:i,title:d,events:f}))}catch(v){console.error(v),a(p({key:i,error:v}))}}}));return function(e,t){return a.apply(this,arguments)}}(),E=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:r}=n().city.currentCity,i=Object(l.a)(Object(c.a)({geoid:r,code:e},t));a(f({key:i}));try{var{offset:u}=n().rubricEvents.data[i].events.paging,{events:d}=yield Object(s.g)(e,Object(c.a)({geoid:r,offset:u+10,limit:10},t));d.prefetchItems&&(a(Object(o.c)({events:d.prefetchItems})),delete d.prefetchItems),a(v({key:i,events:d}))}catch(m){console.error(m),a(y({key:i,error:m}))}}));return function(e,t){return a.apply(this,arguments)}}(),j=Object(l.b)("rubric-events",{stateReconciler:l.e,transforms:[Object(l.c)(u.ui)]});t.a=Object(i.b)(j,d.reducer)},function(e,t,a){"use strict";a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return h})),a.d(t,"c",(function(){return E})),a.d(t,"b",(function(){return j}));var n=a(4),c=a(6),r=a(8),i=a(9),s=a(10),l=a(2),o=a(16),u=a(40),d={data:{},ui:{}},m=Object(r.b)({name:"selection-events",initialState:d,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.data[a].events.items.length?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,events:n,title:c}=t.payload;e.data[a].title=c,e.data[a].events=n,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchMoreStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={title:"",events:{items:[],paging:{offset:0,total:0}},hasMoreItems:!1,updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isLoadingMore:!1,isUpdating:!1}),e.ui[a].isLoadingMore=!0},fetchMoreSuccess(e,t){var{key:a,events:n}=t.payload;e.data[a].events.items.push(...n.items),e.data[a].events.paging=n.paging,e.data[a].hasMoreItems=Boolean(n.paging.total>n.paging.offset+10),e.data[a].updatedAt=Date.now(),e.ui[a].isLoadingMore=!1},fetchMoreError(e,t){var{key:a}=t.payload;e.ui[a].isLoadingMore=!1}},extraReducers:e=>{e.addCase(u.b,(e,t)=>{var{key:a,items:n}=t.payload,r=Object(l.d)(a);for(var i of n)if(i){var s=Object(l.a)(Object(c.a)({code:i.code},r)),o={items:i.events,paging:{offset:0,total:i.count}};e.data[s]?(e.data[s].events=o,e.data[s].hasMoreItems=Boolean(i.count>10),e.data[s].updatedAt=Date.now()):(e.data[s]={title:i.title,events:o,hasMoreItems:Boolean(i.count>10),updatedAt:0},e.ui[s]={isLoading:!1,isLoadingMore:!1,isUpdating:!1})}})}}),{fetchStart:b,fetchSuccess:p,fetchError:f,fetchMoreStart:v,fetchMoreSuccess:y,fetchMoreError:_}=m.actions,g=e=>t=>{var a=Object(l.a)(Object(c.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.data[a]},h=e=>t=>{var a=Object(l.a)(Object(c.a)({code:e,geoid:t.city.currentCity.geoid},t.dateFilter));return t.selectionEvents.ui[a]},E=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:r}=n().city.currentCity,i=Object(l.a)(Object(c.a)({geoid:r,code:e},t)),u=n().selectionEvents.data[i];if(!(u&&u.updatedAt+3e5>Date.now())){a(b({key:i}));try{var{title:d,events:m}=yield Object(s.h)(e,Object(c.a)({geoid:r,offset:0,limit:10},t));m.prefetchItems&&(a(Object(o.c)({events:m.prefetchItems})),delete m.prefetchItems),a(p({key:i,title:d,events:m}))}catch(v){console.error(v),a(f({key:i,error:v}))}}}));return function(e,t){return a.apply(this,arguments)}}(),j=(e,t)=>function(){var a=Object(n.a)((function*(a,n){var{geoid:r}=n().city.currentCity,i=Object(l.a)(Object(c.a)({geoid:r,code:e},t));a(v({key:i}));try{var{offset:u}=n().selectionEvents.data[i].events.paging,{events:d}=yield Object(s.h)(e,Object(c.a)({geoid:r,offset:u+10,limit:10},t));d.prefetchItems&&(a(Object(o.c)({events:d.prefetchItems})),delete d.prefetchItems),a(y({key:i,events:d}))}catch(m){console.error(m),a(_({key:i,error:m}))}}));return function(e,t){return a.apply(this,arguments)}}(),O=Object(l.b)("selection-events",{stateReconciler:l.e,transforms:[Object(l.c)(d.ui)]});t.a=Object(i.b)(O,m.reducer)},function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return v}));var n=a(4),c=a(8),r=a(9),i=a(10),s=a(2),l=a(16),o={data:{},ui:{}},u=Object(c.b)({name:"recommended-events",initialState:o,reducers:{fetchStart(e,t){var{key:a}=t.payload;e.data[a]||(e.data[a]={updatedAt:0}),e.ui[a]||(e.ui[a]={isLoading:!1,isUpdating:!1}),e.data[a].updatedAt?e.ui[a].isUpdating=!0:e.ui[a].isLoading=!0},fetchSuccess(e,t){var{key:a,data:n}=t.payload;e.data[a].top=n.top,e.data[a].concert=n.concert,e.data[a].cinema=n.cinema,e.data[a].theatre=n.theatre,e.data[a].updatedAt=Date.now(),e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1},fetchError(e,t){var{key:a}=t.payload;e.ui[a].isLoading=!1,e.ui[a].isUpdating=!1}}}),{fetchStart:d,fetchSuccess:m,fetchError:b}=u.actions,p=e=>{var t=Object(s.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.data[t]},f=e=>{var t=Object(s.a)({geoid:e.city.currentCity.geoid});return e.recommendedEvents.ui[t]},v=()=>function(){var e=Object(n.a)((function*(e,t){var{geoid:a}=t().city.currentCity,n=Object(s.a)({geoid:a}),c=t().recommendedEvents.data[n];if(!(c&&c.updatedAt+3e5>Date.now())){e(d({key:n}));try{var r,o,u,p,f,v,y,_,g=yield Object(i.f)({geoid:a});e(Object(l.c)({events:[...(null===(r=g.top)||void 0===r?void 0:r.prefetchItems)||[],...(null===(o=g.cinema)||void 0===o?void 0:o.prefetchItems)||[],...(null===(u=g.concert)||void 0===u?void 0:u.prefetchItems)||[],...(null===(p=g.theatre)||void 0===p?void 0:p.prefetchItems)||[]]})),(null===(f=g.top)||void 0===f?void 0:f.prefetchItems)&&delete g.top.prefetchItems,(null===(v=g.cinema)||void 0===v?void 0:v.prefetchItems)&&delete g.cinema.prefetchItems,(null===(y=g.concert)||void 0===y?void 0:y.prefetchItems)&&delete g.concert.prefetchItems,(null===(_=g.theatre)||void 0===_?void 0:_.prefetchItems)&&delete g.theatre.prefetchItems,e(m({key:n,data:g}))}catch(h){console.error(h),e(b({key:n,error:h}))}}}));return function(t,a){return e.apply(this,arguments)}}(),y=Object(s.b)("recommended-events",{stateReconciler:s.e,transforms:[Object(s.c)(o.ui)]});t.a=Object(r.b)(y,u.reducer)},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return l}));var n=a(4),c={timeout:1e4,maximumAge:36e5};function r(){return i.apply(this,arguments)}function i(){return(i=Object(n.a)((function*(){return new Promise((e,t)=>{window.navigator.geolocation.getCurrentPosition(t=>e(t.coords),t,c)})}))).apply(this,arguments)}function s(e){return e*(Math.PI/180)}function l(e,t,a,n){var c=Math.sin(s(a-e)/2)*Math.sin(s(a-e)/2)+Math.cos(s(e))*Math.cos(s(a))*Math.sin(s(n-t)/2)*Math.sin(s(n-t)/2);return 12742*Math.asin(Math.sqrt(c))}},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(51),i=a(38),s=a(72),l=a.n(s),o=({fill:e="white"})=>{var t=[l.a["backward-icon"],l.a["icon-".concat(e)]].join(" ");return c.a.createElement("span",{className:t})};t.a=e=>{var t=Object(i.a)();return c.a.createElement(r.a,{className:[l.a["backward-button"],e.className].filter(Boolean).join(" "),onClick:t},c.a.createElement(o,{fill:e.fill}))}},function(e,t,a){e.exports={"backward-icon":"styles_backward-icon__3EK-Q","icon-white":"styles_icon-white__30Xrl","icon-black":"styles_icon-black__1FNaZ","backward-button":"styles_backward-button__d5kZC"}},function(e,t,a){e.exports={content:"styles_content__2Cnjx",title:"styles_title__XAM43"}},function(e,t,a){e.exports={"menu-modal":"style_menu-modal__34sP4","menu-modal-content":"style_menu-modal-content__2MGuN","menu-modal-visible_yes":"style_menu-modal-visible_yes__md9xJ",fadeIn:"style_fadeIn__1YwV8",slideLeft:"style_slideLeft__3cAXG","menu-modal-visible_no":"style_menu-modal-visible_no__32zFU",fadeOut:"style_fadeOut__3Z8C2",slideRight:"style_slideRight__2-BgZ"}},,,,,,,,,,,,,,,,function(e,t,a){e.exports={loading:"styles_loading__l2xXc",rect:"styles_rect__39Mf0",text:"styles_text__O_35F"}},function(e,t,a){e.exports={block:"styles_block__fQZVR",filter:"styles_filter__2Vym1"}},function(e,t,a){e.exports={block:"styles_block__10trK",item:"styles_item__2uVU7"}},function(e,t,a){e.exports={content:"styles_content__3nFVw",title:"styles_title__2inpl"}},function(e,t,a){e.exports={list:"style_list__3pVg_",wrapper:"style_wrapper__IWliN",button:"style_button__2GIxG"}},function(e,t,a){e.exports={price:"styles_price__1D8ax",left:"styles_left__3RisO",right:"styles_right__3KXqq"}},function(e,t,a){e.exports={title:"styles_title__3XLML",notFound:"styles_notFound__2R52E"}},function(e,t,a){e.exports={title:"styles_title__3xg9O",event:"styles_event__3FTWc"}},function(e,t,a){e.exports={header:"styles_header__2L4R0",content:"styles_content__1NmrT"}},function(e,t,a){e.exports={wrapper:"styles_wrapper__15WSd",select:"styles_select__1BaqC"}},function(e,t,a){e.exports={checkbox:"styles_checkbox__3iL51",label:"styles_label__3hGrm"}},function(e,t,a){e.exports={"city-modal":"styles_city-modal__1AgdR","city-modal-visible_yes":"styles_city-modal-visible_yes__3Ub-H",fadeIn:"styles_fadeIn__26BAg","city-modal-visible_no":"styles_city-modal-visible_no__1NmRJ",fadeOut:"styles_fadeOut__1X9f5"}},function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(8),c=a(103),r={date:Object(c.a)(new Date).toString(),period:1},i=Object(n.b)({name:"date-filter",initialState:r,reducers:{setDate(e,t){e.date=t.payload.date,e.period=t.payload.period||1}}}),{setDate:s}=i.actions;t.a=i.reducer},function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a(46),c=e=>Object(n.format)(e,"YYYY-MM-DD").toString(),r=e=>Object(n.parse)(e)},function(e,t,a){"use strict";var n=a(0),c=a.n(n);function r({threshold:e,ref:t,isLoading:a,loadMore:c,hasMore:r}){var i=function(e,t){var[a,c]=Object(n.useState)(),r=Object(n.useRef)(t);return Object(n.useLayoutEffect)(()=>{if(e.current){r.current,0;var a=new IntersectionObserver(([e])=>{c(e.isIntersecting)},t);return a.observe(e.current),()=>{a.disconnect()}}},[e,t]),a}(t,Object(n.useMemo)(()=>({rootMargin:"0px 0px ".concat(e||0,"px 0px")}),[e]))||!1;Object(n.useEffect)(()=>{r&&(a||i&&c())},[i,c,r,a])}var i=a(53),s=a(94),l=a.n(s),o=e=>{var{itemsGap:t=i.a}=e,a=Object(n.useRef)(null),[s,o,d]=function(e){var{items:t,hasMore:a,loadMore:c,pageSize:r}=e,[i,s]=Object(n.useState)(r),l=Object(n.useMemo)(()=>t.slice(0,i),[t,i]),o=Object(n.useCallback)(()=>{t.length>i?s(i+r):c()},[c,i,r,t]);return[l,a||i<t.length,o]}({items:e.items,hasMore:e.hasMore,loadMore:e.loadMore,pageSize:e.pageSize});return r({ref:a,isLoading:e.isLoadingMore,hasMore:o,loadMore:d,threshold:200}),c.a.createElement("div",{className:l.a.list,style:{gridGap:"".concat(t,"px")}},c.a.createElement(u,Object.assign({},e,{items:s})),e.isLoadingMore&&e.skeleton,c.a.createElement("div",{ref:a}))},u=e=>c.a.createElement(c.a.Fragment,null,e.items.map((t,a)=>t?c.a.createElement(e.component,{key:a,event:t,onClick:e.onItemClick}):null));t.a=e=>{var{itemsGap:t=i.a}=e;return"loadable"===e.type?c.a.createElement(o,e):c.a.createElement("div",{className:l.a.list,style:{gridGap:"".concat(t,"px")}},c.a.createElement(u,e))}},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(18),i=a(23),s=a(58),l=a(106),o=a(27),u=a.n(o);t.a=Object(n.memo)(e=>{var{id:t,title:a,argument:n,image:o,tickets:d}=e.event.eventPreview,m=d&&d[0];return c.a.createElement(r.b,{to:Object(i.a)(t),className:u.a.card,onClick:e.onClick},c.a.createElement("div",{className:u.a["image-wrapper"]},o&&o.eventListCard?c.a.createElement(s.a,{className:u.a.image,alt:a,src:o.eventListCard,src2x:o.eventListCard2x,bgColor:o.bgColor}):c.a.createElement("div",{className:u.a.preview}),m&&c.a.createElement(l.a,{ticket:m,position:"left"}),o&&c.a.createElement("div",{className:u.a["image-overlay"]})),c.a.createElement("div",{className:u.a.description},c.a.createElement("div",{className:u.a.title},a),c.a.createElement("div",{className:u.a.annotation},n)))})},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(146),i=a(95),s=a.n(i);t.a=e=>c.a.createElement("div",{className:[s.a.price,s.a[e.position||"left"]].join(" ")},c.a.createElement(r.a,{ticket:e.ticket}))},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(28),i=a(6),s=a(26),l=a(284),o=a(283),u=a(43),d=a(21),m=a.n(d),b=({isVisible:e,transitions:t,screen:a,onBackward:i})=>{var s=Object(r.a)()?"":[m.a.screen,!e&&!t&&m.a.hidden].filter(Boolean).join(" "),l=Object(n.createRef)(),o=Object(n.useMemo)(()=>({onBackward:i,isVisible:e,ref:l}),[i,e,l]);return c.a.createElement(u.a.Provider,{value:o},c.a.createElement("div",{className:s,ref:l},c.a.createElement(a.component,{params:a.params,location:a.location})))},p={enter:m.a.screenEnter,enterActive:m.a.screenEnterActive,exit:m.a.screenExit,exitActive:m.a.screenExitActive},f={onEnter:e=>{e.previousElementSibling&&e.previousElementSibling.classList.add(m.a.offset)},onExit:e=>{e.previousElementSibling&&e.previousElementSibling.classList.remove(m.a.offset)}},v={enter:600,exit:500};var y=({screens:e,maxDepth:t=10,transitions:a=!1})=>{var[u,d]=Object(n.useState)([]),m=Object(s.e)(),y=Object(s.d)(),_=Object(r.a)();!function(e){var t=Object(s.e)();Object(n.useEffect)(e,[t])}(()=>{_&&window.scrollTo(0,0);var a="POP"===y.action,n="REPLACE"===y.action;if(a&&u.length>1)d(u.slice(0,-1));else{var c=null,r=null;for(var l of e)if(r=Object(s.c)(m.pathname,l)){c=l;break}if(c&&r){var o={id:m.key||Date.now().toString(),component:c.component,params:r.params,location:Object(i.a)({},m)};if(a&&1===u.length)d([o]);else if(n)if(c.component===u[u.length-1].component){var b=[...u];b[u.length-1]=Object(i.a)({},b[u.length-1],{params:o.params,location:o.location}),d(b)}else d([...u.slice(0,-1),o]);else{var p=[...u,o];p.length>t&&p.splice(0,u.length-t+1),d(p)}}else console.warn("No screen matched for route",m.pathname)}});var g=Object(n.useCallback)(({fallback:e}={})=>{_&&window.scrollTo(0,0),y.length>1?y.goBack():e&&y.replace(e)},[y,_]);if(a&&!_)return c.a.createElement(l.a,{component:null},u.map((e,t)=>c.a.createElement(o.a,{key:e.id,timeout:v,classNames:p,enter:1!==u.length,exit:1!==u.length,onEnter:f.onEnter,onExit:f.onExit},c.a.createElement(b,{key:e.id,isVisible:t===u.length-1,transitions:!0,onBackward:g,screen:e}))));if(_){var h=u[u.length-1];return h?c.a.createElement(b,{isVisible:!0,onBackward:g,screen:h}):null}return c.a.createElement(c.a.Fragment,null,u.map((e,t)=>c.a.createElement(b,{key:e.id,isVisible:t===u.length-1,onBackward:g,screen:e})))},_=a(38);function g(e,t={}){return Object(r.a)()&&"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),()=>c.a.createElement(y,{screens:e,maxDepth:t.maxDepth,transitions:t.transitions})}a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return _.b}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(5),i=a(158),s=a.n(i);t.a=()=>c.a.createElement(r.a,{className:s.a.card})},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(5),i=a(92),s=a.n(i);t.a=({className:e})=>c.a.createElement("div",{className:[s.a.block,e].filter(Boolean).join(" ")},Array(5).fill(0).map((e,t)=>c.a.createElement(r.a,{key:t,className:s.a.item})))},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r={rub:"\u20bd",usd:"$"};t.a=({ticket:e})=>{if(!e.price||!e.price.min)return null;var t=["\u043e\u0442",(e.price.min||0)/100,r[e.price.currency]].join("\xa0");return c.a.createElement(c.a.Fragment,null,t)}},,function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(162),i=a.n(r);t.a=({className:e,children:t,onClick:a})=>{var n=[i.a.action,e].filter(Boolean).join(" ");return c.a.createElement("button",{className:n,onClick:a},t)}},function(e,t,a){"use strict";var n=a(0),c=a.n(n),r=a(5),i=a(54),s=a.n(i),l=()=>c.a.createElement("div",{className:s.a.card},c.a.createElement(r.a,{className:s.a.image}),c.a.createElement(r.b,{className:s.a.title}),c.a.createElement(r.b,{className:s.a.description})),o=a(35),u=a.n(o),d=()=>c.a.createElement("div",{className:u.a.feed},c.a.createElement(r.b,{className:u.a.title}),c.a.createElement("div",{className:u.a.events},c.a.createElement("div",{className:u.a.item},c.a.createElement(l,null)),c.a.createElement("div",{className:u.a.item},c.a.createElement(l,null)),c.a.createElement("div",{className:u.a.item},c.a.createElement(l,null))));t.a=()=>c.a.createElement(c.a.Fragment,null,c.a.createElement(d,null),c.a.createElement(d,null),c.a.createElement(d,null),c.a.createElement(d,null))},,,,,,function(e,t,a){e.exports={clear:"styles_clear__ZHIHN"}},,function(e,t,a){e.exports={events:"styles_events__3RaZ8"}},function(e,t,a){e.exports={card:"styles_card__1j4tU"}},function(e,t,a){e.exports={input:"styles_input__2gjR5"}},function(e,t,a){e.exports={input:"styles_input__1gPFI"}},function(e,t,a){e.exports={title:"styles_title__354Bd"}},function(e,t,a){e.exports={action:"styles_action__13iH4"}},,function(e,t,a){e.exports=a(280)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAMAAAAPzWOAAAAAYFBMVEVHcEwAAAD6+voAAAAAAAD19fX4+PgAAAAAAAAAAAD9/f1OTk7X19exsbHe3t4AAADAwMB+fn7MzMzv7+/q6urm5uabm5sAAADo6Oju7u7j4+Pg4ODp6en09PRmZmb///8oaTeDAAAAH3RSTlMAI+UME8nXJh4D8jSFXJMOakF4vK6gTxpYiRIkabgolNJ6sQAAAkRJREFUWMOlmNma2yAMhfGCBV6I14ydTKv3f8u5mHTSxDogWl3j/9OR4CBsDApf1c7RI5yrK28yw9c/3z/D1Tmci0B4cC7aJAqKRKFJp4oiiIiKVDbekSKc/7800snUpI4aSfmgjPjw/16OeGEUjGuSktAyzGu7vivS1bS3zKW1lpmZOSSqW0mIruGXuJ5WvHTaFwqGFfbL32VxCga3dgtheituQsw7g5m5HLAgQcxkVYynIKEzPcvR9B3okFTVVoaU4ymVh49JFVkAhECbxf2+AUg4nyFjjPHiXrVySaSlHm54GWKRtcint9SWhMghNQRa3Mt6KsrIhGdpbYV8dRUZK/BbYGizPhFyMmScB7kkoRMhoKxlTmVFyJVhBDUEHb+sTEBvZJ+FkAlCSA8RvZGZecmBIGcbcyAT6w8gEdqxC5/NwIJEHIJ0czhBhh7MB3iwGU+QCQ48FYJ0yoIQVciUBK/e0EKP7FFIBalx0WlPcfT+GDXU83qWmy6iBut58aX2ShE14Br93vrPy3SAoi/4QieiwDw8rLbFjCI+SC/MI43WWrtMitG6QFfPlp7yfXx2ZOZ2TEEuscHvGr59ycYxDo6gU7+cnbpc5sQI+hTUjSu6cricz0fvPJYPW8PRsEP80fM7WFbE2kUeCObWsCraPvbg0VLYTpHX5O2XksIBPt+MMZuW0gw1fo7urbIwe+xhfFe1yN4Tb/S9TCHKXfHH4Yhqag/l/49P2O3mM+MPyv0QOM1xz/2Zc9sP+0Nq7LHf4NIvJADYmA5mUwwAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAMAAAAPzWOAAAAAYFBMVEVHcEwAAAD6+voAAAAAAAD19fX4+PgAAAAAAAAAAAD9/f1OTk7X19exsbHe3t4AAADAwMB+fn7MzMzv7+/q6urm5uabm5sAAADo6Oju7u7j4+Pg4ODp6en09PRmZmb///8oaTeDAAAAH3RSTlMAI+UME8nXJh4D8jSFXJMOakF4vK6gTxpYiRIkabgolNJ6sQAAAkRJREFUWMOlmNma2yAMhfGCBV6I14ydTKv3f8u5mHTSxDogWl3j/9OR4CBsDApf1c7RI5yrK28yw9c/3z/D1Tmci0B4cC7aJAqKRKFJp4oiiIiKVDbekSKc/7800snUpI4aSfmgjPjw/16OeGEUjGuSktAyzGu7vivS1bS3zKW1lpmZOSSqW0mIruGXuJ5WvHTaFwqGFfbL32VxCga3dgtheituQsw7g5m5HLAgQcxkVYynIKEzPcvR9B3okFTVVoaU4ymVh49JFVkAhECbxf2+AUg4nyFjjPHiXrVySaSlHm54GWKRtcint9SWhMghNQRa3Mt6KsrIhGdpbYV8dRUZK/BbYGizPhFyMmScB7kkoRMhoKxlTmVFyJVhBDUEHb+sTEBvZJ+FkAlCSA8RvZGZecmBIGcbcyAT6w8gEdqxC5/NwIJEHIJ0czhBhh7MB3iwGU+QCQ48FYJ0yoIQVciUBK/e0EKP7FFIBalx0WlPcfT+GDXU83qWmy6iBut58aX2ShE14Br93vrPy3SAoi/4QieiwDw8rLbFjCI+SC/MI43WWrtMitG6QFfPlp7yfXx2ZOZ2TEEuscHvGr59ycYxDo6gU7+cnbpc5sQI+hTUjSu6cricz0fvPJYPW8PRsEP80fM7WFbE2kUeCObWsCraPvbg0VLYTpHX5O2XksIBPt+MMZuW0gw1fo7urbIwe+xhfFe1yN4Tb/S9TCHKXfHH4Yhqag/l/49P2O3mM+MPyv0QOM1xz/2Zc9sP+0Nq7LHf4NIvJADYmA5mUwwAAAAASUVORK5CYII="},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(39),i=a.n(r),s=a(3),l=a(18),o=a(151),u=a(15),d=a(8),m=a(9),b=a(34),p=a(16),f=a(66),v=a(67),y=a(40),_=a(68),g=a(4),h=a(10),E=a(70),j=a(2),O=a(24),A={useGeolocation:!0,isFetchingLocation:!1,currentCity:h.a},k=Object(d.b)({name:"city",initialState:A,reducers:{setCity(e,t){e.currentCity=t.payload},setGeolocation(e,t){e.useGeolocation=t.payload},locationFetchStart(e){e.isFetchingLocation=!0},locationFetchSuccess(e){e.isFetchingLocation=!1},locationFetchFailed(e,t){e.isFetchingLocation=!1,e.useGeolocation=!1,t.payload&&alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e!")}}}),{setCity:C,setGeolocation:w,locationFetchStart:N,locationFetchSuccess:S,locationFetchFailed:x}=k.actions,M=e=>function(){var t=Object(g.a)((function*(t){t(N());try{var a=yield Object(E.a)(),n={longitude:a.longitude,latitude:a.latitude},{cityInfo:c}=yield Object(h.c)(n);t(C({name:c.name,geoid:c.geoid,longitude:c.longitude,latitude:c.latitude})),t(Object(O.b)(c.eventsMenu)),t(S())}catch(r){console.error(r),t(x(e))}}));return function(e){return t.apply(this,arguments)}}(),I=()=>function(){var e=Object(g.a)((function*(e,t){var a=t().city;try{if(a.useGeolocation)return void e(M(!1));var{cityInfo:n}=yield Object(h.c)({longitude:a.currentCity.longitude,latitude:a.currentCity.latitude});e(Object(O.b)(n.eventsMenu))}catch(c){console.error(c)}}));return function(t,a){return e.apply(this,arguments)}}(),L=e=>function(){var t=Object(g.a)((function*(t){e&&t(M(!0)),t(w(e))}));return function(e){return t.apply(this,arguments)}}(),F=Object(j.b)("city"),R=Object(m.b)(F,k.reducer),U=Object(d.b)({name:"city-list",initialState:{isLoading:!1,items:[]},reducers:{setLoading(e,t){e.isLoading=t.payload},setCityListResult(e,t){e.items=t.payload}}}),{setLoading:B,setCityListResult:P}=U.actions,D=()=>function(){var e=Object(g.a)((function*(e){e(B(!0));try{var{cities:t}=yield Object(h.d)();e(P(t))}catch(a){console.error(a)}e(B(!1))}));return function(t){return e.apply(this,arguments)}}(),G=Object(j.b)("city-list",{blacklist:["isLoading"]}),V=Object(m.b)(G,U.reducer),T=a(42),K=a(6),H={data:{results:{groups:[]},popularEvents:{events:[],updatedAt:0}},ui:{popularEvents:{isLoading:!1,isUpdating:!1},results:{isLoading:!1}}},J=Object(d.b)({name:"search",initialState:H,reducers:{fetchPopularStart(e){e.data.popularEvents.events.length>0?e.ui.popularEvents.isUpdating=!0:e.ui.popularEvents.isLoading=!0},fetchPopularSuccess(e,t){e.data.popularEvents.events=t.payload,e.data.popularEvents.updatedAt=Date.now(),e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},fetchPopularError(e){e.ui.popularEvents.isLoading=!1,e.ui.popularEvents.isUpdating=!1},searchStart(e){e.ui.results.isLoading=!0,e.data.results.groups=[]},searchSuccess(e,t){e.ui.results.isLoading=!1,e.data.results.groups=t.payload.map(e=>({code:e.code,title:e.title,events:e.documents.map(e=>function(e){var{id:t,title:a,argument:n,image:c,type:r,minPrice:i}=e.object;return{eventPreview:{id:t,title:a,argument:n,image:c,type:r,tags:[],contentRating:null,tickets:i?[{id:null,price:{min:i.value,currency:i.currency,max:null}}]:[],userRating:null},scheduleInfo:{placesTotal:null,preview:null}}}(e))}))},searchError(e){e.ui.results.isLoading=!1},resetResults(e){e.data.results.groups.length>0&&(e.data.results.groups=[])}}}),{fetchPopularStart:X,fetchPopularSuccess:W,fetchPopularError:q,searchStart:Z,searchSuccess:Y,searchError:z,resetResults:Q}=J.actions,$=()=>function(){var e=Object(g.a)((function*(e,t){var a=t().search.data.popularEvents;if(!(a&&a.updatedAt+9e5>Date.now())){e(X());try{var{geoid:n}=t().city.currentCity,c=yield Object(h.b)({limit:15,geoid:n});e(W(c.events.items))}catch(r){console.error(r),e(q())}}}));return function(t,a){return e.apply(this,arguments)}}(),ee=null;var te=e=>function(){var t=Object(g.a)((function*(t,a){ee&&ee.abort(),ee=new AbortController,a().search.ui.results.isLoading||t(Z());try{var{geoid:n}=a().city.currentCity,{suggest:{groups:c}}=yield Object(h.j)(e,n,ee.signal);t(Y(function(e,t){return t.map(t=>Object(K.a)({},t,{documents:t.documents.filter(({object:t})=>t.title.toLowerCase().includes(e.trim().toLowerCase()))})).filter(e=>e.documents.length)}(e,c))),ee=null}catch(r){if("AbortError"===r.name)return;console.error(r),t(z())}}));return function(e,a){return t.apply(this,arguments)}}(),ae=Object(j.b)("search",{transforms:[Object(m.a)((e,t)=>{if("data"===t){var a=e,{results:n}=a,c=Object(T.a)(a,["results"]);return Object(K.a)({},c,{results:{groups:[]}})}return e}),Object(j.c)(H.ui)]}),ne=Object(m.b)(ae,J.reducer);var ce=a(102),re=a(69);function ie(){return(ie=Object(g.a)((function*(){return{name:"\u0410\u043d\u043e\u043d\u0438\u043c \u0410\u043d\u043e\u043d\u0438\u043c\u043e\u0432",img:{src:{url:a(276),width:24,height:24},src2x:{url:a(277),width:48,height:48}}}}))).apply(this,arguments)}var se=Object(d.b)({name:"user",initialState:{currentUser:{}},reducers:{setUser(e,t){e.currentUser=t.payload}}}),{setUser:le}=se.actions,oe=()=>function(){var e=Object(g.a)((function*(e){try{var t=yield function(){return ie.apply(this,arguments)}();e(le(t))}catch(a){console.error(a)}}));return function(t){return e.apply(this,arguments)}}(),ue=se.reducer,de=[b.FLUSH,b.REHYDRATE,b.PAUSE,b.PERSIST,b.PURGE,b.REGISTER],me=Object(u.combineReducers)({event:p.a,actualEvents:f.c,rubricEvents:v.a,selections:y.a,selectionEvents:_.a,city:R,cityList:V,search:ne,menu:O.a,dateFilter:ce.a,recommendedEvents:re.a,user:ue}),be=Object(d.a)({reducer:me,middleware:Object(d.c)({serializableCheck:{ignoredActions:de}})}),pe=Object(m.c)(be),fe=be,ve=a(29),ye=a(41),_e=a(5),ge=a(91),he=a.n(ge),Ee=()=>c.a.createElement("div",{className:he.a.block},Array(2).fill(0).map((e,t)=>c.a.createElement(_e.a,{key:t,className:he.a.filter}))),je=a(37),Oe=a(144),Ae=a(145),ke=a(73),Ce=a.n(ke),we=()=>c.a.createElement("div",null,c.a.createElement(Ee,null),c.a.createElement("div",{className:Ce.a.content},c.a.createElement(_e.b,{className:Ce.a.title}),c.a.createElement(je.a,{itemsGap:8,count:5,card:Oe.a}),c.a.createElement(_e.b,{className:Ce.a.title}),c.a.createElement(Ae.a,null))),Ne=Object(ve.a)(()=>a.e(2).then(a.bind(null,322))),Se=()=>{var e=Object(s.b)(),t=Object(s.c)(e=>e.dateFilter),{geoid:a}=Object(s.c)(e=>e.city.currentCity);return Object(n.useEffect)(()=>{e(Object(f.d)(t,a)),e(Object(y.c)(t,a))},[e,t,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),c.a.createElement(n.Suspense,{fallback:c.a.createElement(we,null)},c.a.createElement(Ne,null)))},xe=a(149),Me=a(12),Ie=a.n(Me),Le=()=>c.a.createElement("div",{className:Ie.a.container},c.a.createElement("div",{className:Ie.a.image}),c.a.createElement("div",{className:Ie.a["button-wrapper"]},c.a.createElement(_e.a,{className:Ie.a.button})),c.a.createElement(_e.b,{className:Ie.a["date-1"]}),c.a.createElement(_e.b,{className:Ie.a["date-2"]}),c.a.createElement(_e.a,{className:Ie.a.map}),c.a.createElement(_e.b,{className:Ie.a["place-1"]}),c.a.createElement(_e.b,{className:Ie.a["place-2"]}),c.a.createElement("div",{className:Ie.a.gallery},c.a.createElement(_e.b,{className:Ie.a["gallery-header"]}),c.a.createElement("div",{className:Ie.a["gallery-content"]},c.a.createElement(_e.a,{className:Ie.a["gallery-card"]}),c.a.createElement(_e.a,{className:Ie.a["gallery-card"]}),c.a.createElement(_e.a,{className:Ie.a["gallery-card"]}))),c.a.createElement("div",{className:Ie.a.description},Array(5).fill(0).map((e,t)=>c.a.createElement(_e.b,{key:t,className:Ie.a["description-line-".concat(t+1)]}))),c.a.createElement("div",{className:Ie.a.recommended},c.a.createElement(xe.a,null))),Fe=Object(ve.a)(()=>a.e(0).then(a.bind(null,321))),Re=({id:e})=>{var t=Object(s.b)();return Object(n.useEffect)(()=>{t(Object(p.b)(e)),t(Object(re.b)())},[t,e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(n.Suspense,{fallback:c.a.createElement(Le,null)},c.a.createElement(Fe,{id:e,skeleton:c.a.createElement(Le,null)})))},Ue=a(63),Be=a(93),Pe=a.n(Be),De=()=>c.a.createElement("div",null,c.a.createElement(Ee,null),c.a.createElement("div",{className:Pe.a.content},c.a.createElement(_e.b,{className:Pe.a.title}),c.a.createElement(je.a,{count:10,card:Ue.a}))),Ge=Object(ve.a)(()=>a.e(4).then(a.bind(null,318))),Ve=({code:e})=>{var t=Object(s.b)(),a=Object(s.c)(e=>e.dateFilter);return Object(n.useEffect)(()=>{t(Object(v.c)(e,a))},[t,e,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),c.a.createElement(n.Suspense,{fallback:c.a.createElement(De,null)},c.a.createElement(Ge,{code:e})))},Te=Object(ve.a)(()=>a.e(6).then(a.bind(null,319))),Ke=({code:e})=>{var t=Object(s.b)(),a=Object(s.c)(e=>e.dateFilter);return Object(n.useEffect)(()=>{t(Object(_.c)(e,a))},[t,e,a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ye.a,{hasLogo:!0,hasMenu:!0}),c.a.createElement(n.Suspense,{fallback:c.a.createElement(De,null)},c.a.createElement(Te,{code:e})))},He=a(147),Je=a(71),Xe=a(159),We=a.n(Xe),qe=Object(n.forwardRef)((e,t)=>{var{className:a}=e,n=Object(T.a)(e,["className"]),r=[We.a.input,a].filter(Boolean).join(" ");return c.a.createElement("input",Object.assign({ref:t,type:"text",className:r},n))}),Ze=a(160),Ye=a.n(Ze),ze=e=>{var t=Object(n.useRef)(null),[a,r]=Object(n.useState)(""),i=Object(n.useCallback)(t=>{var{value:a}=t.target;e.onChange(a),r(a)},[r,e]);return Object(n.useEffect)(()=>{t.current&&t.current.focus()},[t]),c.a.createElement(qe,{ref:t,className:Ye.a.input,defaultValue:a,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c",onChange:i})},Qe=a(104),$e=a(105);var et=a(161),tt=a.n(et),at=()=>c.a.createElement(c.a.Fragment,null,Array(3).fill(0).map((e,t)=>c.a.createElement("div",{key:t},c.a.createElement(_e.b,{className:tt.a.title}),c.a.createElement(je.a,{count:3,card:Ue.a})))),nt=a(96),ct=a.n(nt),rt=({onItemClick:e})=>{var{groups:t}=Object(s.c)(e=>e.search.data.results),{isLoading:a}=Object(s.c)(e=>e.search.ui.results),r=function(e,t){var[a,c]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{if(e){var a=window.setTimeout(()=>c(!0),t);return()=>clearTimeout(a)}c(!1)},[e,t]),a}(a,250);return r?c.a.createElement(at,null):0!==t.length||a||r?c.a.createElement(c.a.Fragment,null,t.map(({code:t,title:a,events:n})=>c.a.createElement("section",{key:t},c.a.createElement("h2",{className:ct.a.title},a),c.a.createElement(Qe.a,{items:n,component:$e.a,onItemClick:e})))):c.a.createElement("div",{className:ct.a.notFound},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")},it=a(23),st=a(97),lt=a.n(st),ot=({showTitle:e})=>c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(_e.b,{className:lt.a.title}),c.a.createElement("div",null,Array(15).fill(0).map((e,t)=>c.a.createElement(_e.b,{className:lt.a.event,key:t})))),ut=a(56),dt=a.n(ut),mt=({onLinkClick:e})=>{var{events:t}=Object(s.c)(e=>e.search.data.popularEvents),{isLoading:a}=Object(s.c)(e=>e.search.ui.popularEvents);return c.a.createElement("section",null,c.a.createElement("div",{className:dt.a.title},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b"),a&&c.a.createElement(ot,null),c.a.createElement("ul",{className:dt.a.events},t.map((t,a)=>{if(!t)return null;var{id:n,title:r}=t.eventPreview;return c.a.createElement("li",{key:a,className:dt.a.event},c.a.createElement(l.b,{onClick:e,className:dt.a.link,to:Object(it.a)(n)},r))})))},bt=a(98),pt=a.n(bt),ft=()=>{var[e,t]=Object(n.useState)(!1),a=Object(s.b)();Object(n.useEffect)(()=>{a($())},[a]);var r=Object(n.useMemo)(()=>Object(He.a)(500,e=>{e=e.trim(),t(Boolean(e)),a(e?te(e):Q())}),[a]),i=Object(n.useCallback)(()=>{a(Q())},[a]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:pt.a.header},c.a.createElement(Je.a,{fill:"black"}),c.a.createElement(ze,{onChange:r})),c.a.createElement("div",{className:pt.a.content},e?c.a.createElement(rt,{onItemClick:i}):c.a.createElement(mt,{onLinkClick:i})))},vt=a(57),yt=a.n(vt),_t=e=>{var{text:t,to:a,onItemClick:n}=e;return c.a.createElement("li",{className:yt.a.item},c.a.createElement(l.c,{exact:!0,onClick:n,className:yt.a.link,activeClassName:yt.a["active-item"],to:a},t))},gt=e=>c.a.createElement("ul",{className:yt.a.list},c.a.createElement(_t,{to:"/",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",onItemClick:e.onItemClick}),e.tags.map(t=>c.a.createElement(_t,{key:t.code,to:Object(it.c)(t.code),text:t.name,onItemClick:e.onItemClick}))),ht=a(58),Et=a(36),jt=a.n(Et),Ot=()=>{var e=Object(s.c)(e=>e.user.currentUser),t=e.name||"\u0412\u043e\u0439\u0442\u0438";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:jt.a.container},c.a.createElement("div",{className:jt.a.avatar},e.img?c.a.createElement(ht.a,{className:jt.a["avatar-image"],alt:t,src:e.img.src,src2x:e.img.src2x}):c.a.createElement("span",{className:[jt.a["avatar-image"],jt.a.stub].join(" ")})),c.a.createElement("div",{className:jt.a.username},t)))},At=a(99),kt=a.n(At),Ct=({setCityModalVisibleCallback:e})=>{var t=Object(s.c)(e=>e.city.currentCity),a=Object(n.useCallback)(()=>{e(!0)},[e]);return c.a.createElement("div",{className:kt.a.wrapper},c.a.createElement("div",{className:kt.a.select,onClick:a},t?t.name:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"))},wt=a(74),Nt=a.n(wt),St=({setCityModalVisibleCallback:e})=>{var t=Object(s.b)(),{visible:a,items:r}=Object(s.c)(e=>e.menu),[i,l]=Object(n.useState)(!1),o=[Nt.a["menu-modal"],a||i?Nt.a["menu-modal-visible_".concat(a?"yes":"no")]:""].join(" "),u=Object(n.useCallback)(()=>{l(!0),e(!1),t(Object(O.c)(!1))},[t,l,e]),d=Object(n.useCallback)(e=>{e.stopPropagation()},[]);return c.a.createElement("div",{className:o,onClick:u},c.a.createElement("div",{className:Nt.a["menu-modal-content"],onClick:d},c.a.createElement(Ot,null),c.a.createElement(Ct,{setCityModalVisibleCallback:e}),c.a.createElement(gt,{tags:r,onItemClick:u})))},xt=a(26),Mt=a(285);var It=a(100),Lt=a.n(It),Ft=e=>{var{className:t,label:a}=e,n=Object(T.a)(e,["className","label"]),r=[Lt.a.checkbox,t].filter(Boolean).join(" ");return c.a.createElement("label",{className:Lt.a.label},c.a.createElement("input",Object.assign({type:"checkbox",className:r},n)),a)},Rt=a(148),Ut=a(22),Bt=a.n(Ut),Pt=({visible:e,openCityModal:t,wasClosed:a,onSaveClick:n,useGeolocation:r,onGeolocationChanged:i,selectedCity:l})=>{var o=Object(s.c)(e=>e.city.isFetchingLocation),u=[Bt.a.wrapper,e||a?Bt.a["wrapper-visible_".concat(e?"yes":"no")]:"",o&&Bt.a.wrapper_loading].join(" ");return c.a.createElement("div",{className:u},c.a.createElement("div",{className:Bt.a.title},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434"),c.a.createElement("div",{className:Bt.a["auto-select-box"]},c.a.createElement(Ft,{checked:r,onChange:i,label:"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"})),c.a.createElement("div",{className:Bt.a.selected},c.a.createElement("div",{className:Bt.a["selected-city-label"]},"\u0413\u043e\u0440\u043e\u0434"),c.a.createElement("div",{className:Bt.a["selected-city-name"],onClick:t},l.name)),c.a.createElement(Rt.a,{className:Bt.a.button,onClick:n},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},Dt=a(45),Gt=a.n(Dt),Vt=e=>{var{city:t,onCityClick:a}=e,r=Object(n.useCallback)(()=>{a(t)},[a,t]);return c.a.createElement("li",{className:Gt.a["city-item"],onClick:r},t.name)},Tt=e=>{var{isLoading:t,items:a,onCityClick:n}=e;return t?c.a.createElement(c.a.Fragment,null,"loading..."):c.a.createElement("ul",{className:Gt.a["city-list"]},a.map(e=>e?c.a.createElement(Vt,{key:e.geoid,city:e,onCityClick:n}):null))},Kt=({visible:e,onCitySelect:t,wasClosed:a})=>{var r=Object(s.b)(),{items:i,isLoading:l}=Object(s.c)(e=>e.cityList),[o,u]=Object(n.useState)(i),d=[Gt.a.wrapper,e||a?Gt.a["wrapper-visible_".concat(e?"yes":"no")]:""].join(" ");Object(n.useEffect)(()=>{i.length?u(i):r(D())},[r,i]);var m=Object(n.useCallback)(e=>{var t=e.target.value.toLowerCase();t.trim()?u(i.filter(({name:e})=>-1!==e.toLowerCase().indexOf(t))):u(i)},[i]);return c.a.createElement("div",{className:d},c.a.createElement(qe,{className:Gt.a.input,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",onChange:m}),c.a.createElement(Tt,{isLoading:l,items:o,onCityClick:t}))},Ht=a(101),Jt=a.n(Ht),Xt=({visible:e,setCityModalVisibleCallback:t})=>{var a=c.a.createRef(),r=Object(s.b)(),i=Object(xt.d)(),l=Object(s.c)(e=>e.city.currentCity),o=Object(s.c)(e=>e.city.useGeolocation),u=function(e){var t=Object(n.useRef)();return Object(n.useEffect)(()=>{t.current=e},[e]),t.current}(l),[d,m]=Object(n.useState)(l),[b,p]=Object(n.useState)(!1),[f,v]=Object(n.useState)(!1),[y,_]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),[E,j]=Object(n.useState)(!1),O=[Jt.a["city-modal"],e||b?Jt.a["city-modal-visible_".concat(e?"yes":"no")]:""].join(" ");Object(n.useEffect)(()=>{h(e)},[h,e]),Object(n.useEffect)(()=>{m(l),u&&u.name!==l.name&&(console.warn("Go to `/` route"),i.replace("/"))},[m,l,u,i]);var A=Object(n.useCallback)(e=>{var t=e.target.checked;r(L(t))},[r]),k=Object(n.useCallback)(()=>{d.name!==l.name&&m(l),p(!0),j(!1),h(!1),t(!1)},[d,l,m,p,j,h,t]),w=Object(n.useCallback)(()=>{p(!0),h(!1),t(!1),r(C(d)),d.name!==l.name&&r(I())},[h,t,r,d,l]),N=Object(n.useCallback)(e=>{m(e),_(!0),j(!1),h(!0),r(L(!1))},[r,m,_,j,h]),S=Object(n.useCallback)(()=>{v(!0),j(!0),h(!1)},[v,j,h]);return Object(Mt.a)(a,k),c.a.createElement("div",{className:O},e&&c.a.createElement("div",{ref:a},c.a.createElement(Pt,{visible:g,openCityModal:S,onGeolocationChanged:A,useGeolocation:o,wasClosed:f,selectedCity:d,onSaveClick:w}),c.a.createElement(Kt,{visible:E,onCitySelect:N,wasClosed:y})))},Wt=a(107),qt=a(28),Zt=Object(Wt.a)([{path:"/",exact:!0,component:Object(n.memo)(()=>c.a.createElement(Se,null))},{path:"/event/:id",exact:!0,component:Object(n.memo)(({params:{id:e}})=>c.a.createElement(Re,{id:e}))},{path:"/events/:code",exact:!0,component:Object(n.memo)(({params:{code:e}})=>c.a.createElement(Ve,{code:e}))},{path:"/selection/:code",exact:!0,component:Object(n.memo)(({params:{code:e}})=>c.a.createElement(Ke,{code:e}))},{path:"/search",exact:!0,component:Object(n.memo)(()=>c.a.createElement(ft,null))},{path:"*",component:Object(n.memo)(()=>c.a.createElement("div",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))}],{maxDepth:10,transitions:!0}),Yt=()=>{var e=Object(s.b)(),[t,a]=Object(n.useState)(!1),r=Object(n.useCallback)(e=>{a(e)},[a]);return Object(n.useEffect)(()=>{e(I())},[e]),Object(n.useEffect)(()=>{e(oe())},[e]),Object(n.useEffect)(()=>{Object(qt.a)()&&(document.body.style.overflow="auto")},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Zt,null),c.a.createElement(St,{setCityModalVisibleCallback:r}),c.a.createElement(Xt,{setCityModalVisibleCallback:r,visible:t}))},zt=[];"IntersectionObserver"in window||zt.push(a.e(9).then(a.t.bind(null,316,7))),"fetch"in window||zt.push(a.e(11).then(a.bind(null,317)));var Qt=()=>{var[e,t]=Object(n.useState)(Boolean(!zt.length));return Object(n.useEffect)(()=>{zt.length&&Promise.all(zt).then(()=>t(!0))},[]),c.a.createElement(c.a.Fragment,null,e&&c.a.createElement(Yt,null))};a(279);i.a.render(c.a.createElement(s.a,{store:fe},c.a.createElement(o.a,{loading:null,persistor:pe},c.a.createElement(l.a,null,c.a.createElement(Qt,null)))),document.getElementById("root"))}],[[164,5,8]]]);
//# sourceMappingURL=main.5040ce97.chunk.js.map