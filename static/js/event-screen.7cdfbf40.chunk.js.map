{"version":3,"sources":["components/LazyRender/index.tsx","hooks/useVisibleOnce.ts","screens/EventScreen/components/Title/index.tsx","screens/EventScreen/components/ContentBlock/index.tsx","components/GalleryModal/styles.module.css","components/Gallery/styles.module.css","components/CollapsedText/styles.module.css","screens/EventScreen/components/Title/styles.module.css","screens/EventScreen/components/ContentBlock/styles.module.css","screens/EventScreen/components/Cover/styles.module.css","screens/EventScreen/components/TicketButton/styles.module.css","components/YaMapModal/styles.module.css","components/YaMapWidget/styles.module.css","screens/EventScreen/components/VenueInfo/styles.module.css","screens/EventScreen/styles.module.css","components/GalleryModal/index.tsx","components/Gallery/index.tsx","components/CollapsedText/index.tsx","hooks/useScrollEffect.ts","screens/EventScreen/components/Cover/index.tsx","screens/EventScreen/components/TicketButton/index.tsx","lib/payment.ts","lib/maps.ts","components/YaMapModal/index.tsx","components/YaMapWidget/index.tsx","screens/EventScreen/components/VenueInfo/index.tsx","components/LazyBlock/index.tsx","screens/EventScreen/components/RecommendedEvents/index.tsx","screens/EventScreen/Component.tsx"],"names":["LazyRender","children","skeleton","intersectionOptions","ref","useRef","canRender","options","isVisible","setVisible","useState","useEffect","current","observer","IntersectionObserver","entry","isIntersecting","observe","disconnect","useVisibleOnce","needSkeleton","showSkeleton","Title","className","styles","title","ContentBlock","block","filter","Boolean","join","module","exports","GalleryModal","props","currentIndex","setCurrentIndex","startIndex","scroller","useLayoutEffect","index","scrollLeft","window","innerWidth","rootEl","entries","activated","reduce","max","intersectionRatio","el","target","Array","prototype","indexOf","call","parentElement","root","threshold","from","items","modal","counter","length","close","onClick","onBackClick","carousel","map","image","i","key","large2x","url","Image","src","large","src2x","bgColor","alt","Gallery","selectedIndex","setSelectedIndex","images","useMemo","onItemClick","useCallback","e","currentTarget","container","thumbnail","thumbnail2x","CollapsedText","shortRef","fullRef","visible","shortRect","getBoundingClientRect","fullRect","height","lines","short","style","WebkitLineClamp","hidden","ClearButton","button","fullTextLabel","useScrollEffect","scrollableRef","predicateRef","predicate","value","setValue","updateValue","throttle","addEventListener","removeEventListener","Cover","event","imageRef","argument","tags","contentRating","tagLine","tag","name","cover","touchPrimary","fade","overview","StickyVisibleClasses","Yes","No","Button","ticket","ActionButton","TicketPrice","isElementOutOfViewport","Number","top","TicketButton","tickets","paymentButtonRef","screenRef","useScreenRef","documentRef","document","isIOS","stickyVisibleClass","setStickyVisibleClass","onPaymentButtonClick","alert","isStaticPaymentButtonVisible","static","sticky","getStaticMapUrl","params","URLSearchParams","l","Object","set","String","Map","lazy","MetroStation","station","colors","color","backgroundColor","YaMapModal","coordinates","metro","address","place","longitude","latitude","fallback","point","YaMapWidget","staticMapImage","size","z","pt","width","isModalOpen","setModalOpen","onMapClick","body","overflow","VenueInfo","schedule","oneOfPlaces","placePreview","Inner","fetchData","LazyBlock","Component","lazyDeferred","memo","isScrollAtTop","scrollY","scrollTop","id","mainImageRef","eventPage","useSelector","state","data","isLoading","description","type","preview","isPageHeaderClear","PageHeader","mods","backward","hasLogo","hasMenu","wrapper","city","text","RecommendedEvents","placeholder"],"mappings":"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","file":"static/js/event-screen.7cdfbf40.chunk.js","sourcesContent":["import React, { useRef, ReactElement, useState, useEffect } from 'react';\n\nimport { useVisibleOnce } from '../../hooks/useVisibleOnce';\n\ntype Props = {\n    children: ReactElement;\n    skeleton?: ReactElement;\n    intersectionOptions?: IntersectionObserverInit;\n};\n\nconst LazyRender: React.FC<Props> = ({ children, skeleton, intersectionOptions }) => {\n    const ref = useRef<HTMLDivElement | null>(null);\n    const canRender = useVisibleOnce(ref, intersectionOptions);\n    const [needSkeleton, showSkeleton] = useState(false);\n\n    useEffect(() => {\n        if (!canRender) {\n            showSkeleton(true);\n        }\n    }, [canRender]);\n\n    return <div ref={ref}>{canRender ? children : needSkeleton && skeleton}</div>;\n};\n\nexport default LazyRender;\n","import { RefObject, useEffect, useState } from 'react';\n\nexport function useVisibleOnce(ref: RefObject<HTMLElement>, options?: IntersectionObserverInit) {\n    // Пока не навешан обработчик на элемент, мы точно не можем сказать видим он или нет,\n    // поэтому начальное значение undefined\n    const [isVisible, setVisible] = useState<boolean>();\n\n    useEffect(() => {\n        if (!ref.current || isVisible) {\n            return;\n        }\n\n        const observer = new IntersectionObserver(([entry]) => {\n            setVisible(entry.isIntersecting);\n        }, options);\n\n        observer.observe(ref.current);\n\n        return () => {\n            observer.disconnect();\n        };\n    }, [ref, options, isVisible]);\n\n    return isVisible;\n}\n","import React from 'react';\n\nimport styles from './styles.module.css';\n\nconst Title: React.FC = ({ children }) => {\n    return <h2 className={styles.title}>{children}</h2>;\n};\n\nexport default Title;\n","import React from 'react';\n\nimport styles from './styles.module.css';\n\nconst ContentBlock: React.FC<{ className?: string }> = ({ children, className }) => {\n    return <div className={[styles.block, className].filter(Boolean).join(' ')}>{children}</div>;\n};\n\nexport default ContentBlock;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"styles_modal__2Q8g_\",\"carousel\":\"styles_carousel__3JHc0\",\"image\":\"styles_image__3O5qH\",\"close\":\"styles_close__4LZBs\",\"counter\":\"styles_counter__3PRwA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3ZZwU\",\"thumbnail\":\"styles_thumbnail__20t1x\",\"image\":\"styles_image__QgQS0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"short\":\"styles_short__3k1iO\",\"hidden\":\"styles_hidden__1LiUD\",\"button\":\"styles_button__D0dDq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__2X6Eu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"styles_block__1VDKZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cover\":\"styles_cover__13-3l\",\"image\":\"styles_image__CjVbW\",\"fade\":\"styles_fade__3F1Tn\",\"overview\":\"styles_overview__1GrfL\",\"title\":\"styles_title__3Zqkm\",\"argument\":\"styles_argument__2fOy2\",\"tags\":\"styles_tags__2NPR2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"static\":\"styles_static__2-03C\",\"sticky\":\"styles_sticky__1Rl75\",\"sticky-visible_yes\":\"styles_sticky-visible_yes__2Dqcw\",\"slideUp\":\"styles_slideUp__39hv4\",\"sticky-visible_no\":\"styles_sticky-visible_no__pKDDZ\",\"slideDown\":\"styles_slideDown__2oDJ0\",\"button\":\"styles_button__1odxN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"styles_modal__3Zspv\",\"close\":\"styles_close__Yequy\",\"close-button\":\"styles_close-button__1pQas\",\"metro-containter\":\"styles_metro-containter__13P1B\",\"station\":\"styles_station__3UP2f\",\"metro-point\":\"styles_metro-point__1HHJ4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"styles_map__1AUAZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"styles_title__1_HWs\",\"address\":\"styles_address__Of4nL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"styles_wrapper__1GA7u\",\"city\":\"styles_city__18Nw2\",\"schedule\":\"styles_schedule__2bK7D\",\"description\":\"styles_description__1TgUA\",\"placeholder\":\"styles_placeholder__2Dhd8\"};","import React, { useState, useEffect, useRef, MouseEvent, useLayoutEffect } from 'react';\nimport { GalleryImage } from '../../lib/api/fragments/gallery-image';\n\nimport Image from '../Image';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    items: GalleryImage[];\n    onBackClick: (e: MouseEvent<HTMLButtonElement>) => void;\n    startIndex?: number;\n};\n\n// Можно попробовать pinch-zoom\n// https://github.com/GoogleChromeLabs/pinch-zoom\n\nconst GalleryModal: React.FC<Props> = props => {\n    const [currentIndex, setCurrentIndex] = useState(props.startIndex || 0);\n    const scroller = useRef<HTMLDivElement | null>(null);\n\n    useLayoutEffect(() => {\n        if (!props.startIndex) {\n            return;\n        }\n\n        scroller.current!.scrollLeft = getScrollPosition(props.startIndex);\n    }, [props.startIndex]);\n\n    useEffect(() => {\n        const rootEl = scroller.current!;\n\n        const observer = new IntersectionObserver(\n            entries => {\n                // find the entry with the largest intersection ratio\n                const activated = entries.reduce((max, entry) => {\n                    return entry.intersectionRatio > max.intersectionRatio ? entry : max;\n                });\n\n                if (activated.intersectionRatio > 0) {\n                    const el = activated.target;\n                    const index = Array.prototype.indexOf.call(el.parentElement!.children, el);\n\n                    setCurrentIndex(index);\n                }\n            },\n            {\n                root: scroller.current,\n                threshold: 0.5,\n            }\n        );\n\n        for (const el of Array.from(rootEl.children)) {\n            observer.observe(el);\n        }\n\n        return () => {\n            observer.disconnect();\n        };\n    }, [props.items, props.startIndex]);\n\n    return (\n        <div className={styles.modal}>\n            <div className={styles.counter}>\n                {currentIndex + 1} из {props.items.length}\n            </div>\n            <button className={styles.close} onClick={props.onBackClick}>\n                Назад\n            </button>\n\n            <div className={styles.carousel} ref={scroller}>\n                {props.items.map((image, i) => {\n                    return (\n                        <div className={styles.image} key={image.large2x.url}>\n                            <Image\n                                src={image.large}\n                                src2x={image.large2x}\n                                bgColor={image.bgColor}\n                                alt={`Фотография ${i + 1}`}\n                            />\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n};\n\nfunction getScrollPosition(index: number) {\n    const itemsMargin = 20;\n\n    return (window.innerWidth + itemsMargin) * index;\n}\n\nexport default GalleryModal;\n","import React, { useCallback, useState, MouseEvent, useMemo } from 'react';\n\nimport { GalleryImage } from '../../lib/api/fragments/gallery-image';\n\nimport GalleryModal from '../GalleryModal';\nimport Image from '../Image';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    items: Array<GalleryImage | null>;\n};\n\nconst Gallery: React.FC<Props> = props => {\n    const [selectedIndex, setSelectedIndex] = useState(-1);\n\n    const images = useMemo(() => {\n        return props.items.filter(Boolean);\n    }, [props.items]) as GalleryImage[];\n\n    const onItemClick = useCallback((e: MouseEvent<HTMLImageElement>) => {\n        const el = e.currentTarget;\n        const index = Array.prototype.indexOf.call(el.parentElement!.children, el);\n        setSelectedIndex(index);\n    }, []);\n\n    const onBackClick = useCallback(() => {\n        setSelectedIndex(-1);\n    }, []);\n\n    return (\n        <>\n            <div className={styles.container}>\n                {images.map((image, i) => {\n                    return (\n                        <div className={styles.thumbnail} key={image.thumbnail2x.url} onClick={onItemClick}>\n                            <Image\n                                className={styles.image}\n                                src={image.thumbnail}\n                                src2x={image.thumbnail2x}\n                                bgColor={image.bgColor}\n                                alt={`Фотография ${i + 1}`}\n                            />\n                        </div>\n                    );\n                })}\n            </div>\n            {selectedIndex !== -1 && (\n                <GalleryModal items={images} onBackClick={onBackClick} startIndex={selectedIndex} />\n            )}\n        </>\n    );\n};\n\nexport default Gallery;\n","import React, { useEffect, useRef, useState, useCallback } from 'react';\n\nimport ClearButton from '../ClearButton';\n\nimport styles from './styles.module.css';\n\nexport type ContentProps = {\n    className?: string;\n    lines: number;\n    fullTextLabel: string;\n};\n\nconst CollapsedText: React.FC<ContentProps> = props => {\n    const shortRef = useRef<HTMLDivElement | null>(null);\n    const fullRef = useRef<HTMLDivElement | null>(null);\n    const [visible, setVisible] = useState(false);\n\n    useEffect(() => {\n        if (!shortRef.current || !fullRef.current) {\n            return;\n        }\n\n        const shortRect = shortRef.current.getBoundingClientRect();\n        const fullRect = fullRef.current.getBoundingClientRect();\n\n        if (shortRect.height === fullRect.height) {\n            setVisible(true);\n        }\n    }, [shortRef, fullRef, props.lines]);\n\n    const onClick = useCallback(() => setVisible(true), [setVisible]);\n\n    return (\n        <>\n            {!visible && (\n                <div\n                    ref={shortRef}\n                    className={[props.className, styles.short].filter(Boolean).join(' ')}\n                    style={{ WebkitLineClamp: props.lines }}\n                >\n                    {props.children}\n                </div>\n            )}\n            <div className={[props.className, !visible && styles.hidden].filter(Boolean).join(' ')} ref={fullRef}>\n                {props.children}\n            </div>\n            {!visible && (\n                <ClearButton className={styles.button} onClick={onClick}>\n                    {props.fullTextLabel}\n                </ClearButton>\n            )}\n        </>\n    );\n};\n\nexport default CollapsedText;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { throttle } from 'throttle-debounce';\n\nconst SCROLL_THROTTLE_INTERVAL = 50;\n\nexport const useScrollEffect = <TScrollEventTarget extends EventTarget, TPredicateElement extends Element>(\n    scrollableRef: React.MutableRefObject<TScrollEventTarget | null>,\n    predicateRef: React.MutableRefObject<TPredicateElement | null>,\n    predicate: (predicateRef: React.MutableRefObject<TPredicateElement | null>) => boolean\n) => {\n    const [value, setValue] = useState<boolean>(() => predicate(predicateRef));\n    const updateValue = useCallback(\n        throttle(SCROLL_THROTTLE_INTERVAL, () => {\n            setValue(predicate(predicateRef));\n        }),\n        [setValue, scrollableRef, predicateRef, predicate]\n    );\n\n    useEffect(() => {\n        const { current } = scrollableRef;\n\n        current?.addEventListener('scroll', updateValue);\n\n        return () => {\n            current?.removeEventListener('scroll', updateValue);\n        };\n    }, [scrollableRef, predicateRef, updateValue]);\n\n    useEffect(() => {\n        updateValue();\n    }, [updateValue, scrollableRef, predicateRef]);\n\n    return value;\n};\n","import React from 'react';\n\nimport { Event } from '../../../../redux/slices/event';\n\nimport Image from '../../../../components/Image';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    event: Partial<Event>;\n    imageRef: React.Ref<HTMLDivElement>;\n};\n\nconst Cover: React.FC<Props> = ({ event, imageRef }) => {\n    const { title, argument, image, tags, contentRating } = event;\n\n    const tagLine = [...(tags || []).map(tag => tag.name), contentRating].filter(Boolean).join('  •  ');\n\n    return (\n        <div className={styles.cover} ref={imageRef}>\n            {image && <Image className={styles.image} src={image.touchPrimary} bgColor={image.bgColor} />}\n            <div className={styles.fade} />\n            <div className={styles.overview}>\n                <h1 className={styles.title}>{title}</h1>\n                <div className={styles.argument}>{argument}</div>\n                <div className={styles.tags}>{tagLine}</div>\n            </div>\n        </div>\n    );\n};\n\nexport default Cover;\n","import React, { useCallback, useRef, useState, useEffect, MutableRefObject } from 'react';\n\nimport { Ticket } from '../../../../lib/api/fragments/ticket';\nimport { Event } from '../../../../redux/slices/event';\n\nimport { getNativePayment } from '../../../../lib/payment';\n\nimport ActionButton from '../../../../components/ActionButton';\nimport TicketPrice from '../../../../components/TicketPrice';\n\nimport { useScreenRef } from '../../../../components/StackNavigator';\nimport { useScrollEffect } from '../../../../hooks/useScrollEffect';\nimport { isIOS } from '../../../../lib/is-ios';\nimport styles from './styles.module.css';\n\nconst StickyVisibleClasses = {\n    Yes: styles['sticky-visible_yes'],\n    No: styles['sticky-visible_no'],\n};\n\ntype ButtonProps = {\n    ticket: Ticket;\n    onClick: () => void;\n};\nconst Button: React.FC<ButtonProps> = ({ ticket, onClick }) => (\n    <ActionButton className={styles.button} onClick={onClick}>\n        Билеты <TicketPrice ticket={ticket} />\n    </ActionButton>\n);\n\nconst isElementOutOfViewport = (ref: React.MutableRefObject<HTMLDivElement | null>) =>\n    Number(ref.current?.getBoundingClientRect()?.top) < 0;\n\ntype Props = {\n    event: Partial<Event>;\n};\nconst TicketButton: React.FC<Props> = ({ event }) => {\n    const ticket = event.tickets && event.tickets[0];\n\n    const paymentButtonRef = useRef<HTMLDivElement | null>(null);\n    const screenRef = useScreenRef();\n    const documentRef = useRef(document);\n    const scrollableRef: MutableRefObject<EventTarget | null> = isIOS() ? documentRef : screenRef;\n    const [stickyVisibleClass, setStickyVisibleClass] = useState<string>('');\n    const onPaymentButtonClick = useCallback(() => {\n        getNativePayment();\n    }, []);\n\n    const isStaticPaymentButtonVisible = useScrollEffect(scrollableRef, paymentButtonRef, isElementOutOfViewport);\n    useEffect(() => {\n        if (!paymentButtonRef.current || !ticket) {\n            return;\n        }\n\n        if (!isStaticPaymentButtonVisible && stickyVisibleClass !== StickyVisibleClasses.Yes) {\n            return;\n        }\n\n        const stickyButtonVisibleClass = isStaticPaymentButtonVisible ?\n            StickyVisibleClasses.Yes :\n            StickyVisibleClasses.No;\n\n        setStickyVisibleClass(stickyButtonVisibleClass);\n    }, [paymentButtonRef, isStaticPaymentButtonVisible, ticket, stickyVisibleClass]);\n\n    if (!ticket) {\n        return null;\n    }\n\n    return (\n        <>\n            <div className={styles.static} ref={paymentButtonRef}>\n                <Button ticket={ticket} onClick={onPaymentButtonClick} />\n            </div>\n            <div className={[styles.sticky, stickyVisibleClass].join(' ')}>\n                <Button ticket={ticket} onClick={onPaymentButtonClick} />\n            </div>\n        </>\n    );\n};\n\nexport default TicketButton;\n","export function getNativePayment() {\n    alert('Купить билет!');\n}\n","type StaticMapUrlOptions = {\n    size: [number, number];\n    z: number;\n    ll?: [number, number];\n    pt?: [number, number, 'pm2rdl'];\n};\n\nexport function getStaticMapUrl(options: StaticMapUrlOptions) {\n    const params = new URLSearchParams({ l: 'map' });\n\n    for (const [key, value] of Object.entries(options)) {\n        params.set(key, String(value));\n    }\n\n    return `//static-maps.yandex.ru/1.x/?${params}`;\n}\n","import React, { Suspense, MouseEvent, useMemo, lazy } from 'react';\n\nimport { Coordinates } from '../../lib/api/fragments/coordinates';\nimport { Metro } from '../../lib/api/fragments/metro';\n\nimport styles from './styles.module.css';\n\nconst Map = lazy(() =>\n    import(\n        /* webpackChunkName: \"ya-map-modal\" */\n        './Map'\n    )\n);\n\ntype Props = {\n    onBackClick: (e: MouseEvent<HTMLButtonElement>) => void;\n    coordinates: Coordinates;\n    address: string | null;\n    metro: Metro[] | null;\n};\n\nconst MetroStation: React.FC<Metro> = props => {\n    return (\n        <div className={styles.station}>\n            {props.colors.map(color => {\n                return <div style={{ backgroundColor: color }} key={color} className={styles['metro-point']} />;\n            })}\n            {props.name}\n        </div>\n    );\n};\n\nconst YaMapModal: React.FC<Props> = props => {\n    const { coordinates, metro, address } = props;\n    const place = useMemo<[number, number]>(() => [coordinates.longitude, coordinates.latitude], [coordinates]);\n\n    return (\n        <div className={styles.modal}>\n            <div className={styles.close}>\n                <button className={styles['close-button']} onClick={props.onBackClick}>\n                    Назад\n                </button>\n            </div>\n            <Suspense fallback={null}>\n                <Map point={place} />\n            </Suspense>\n            {(metro || address) && (\n                <div className={styles['metro-containter']}>\n                    {metro && metro.map(station => <MetroStation key={station.name} {...station} />)}\n                    {address}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default YaMapModal;\n","import React, { useCallback, useState } from 'react';\n\nimport { Coordinates } from '../../lib/api/fragments/coordinates';\nimport { Metro } from '../../lib/api/fragments/metro';\n\nimport { getStaticMapUrl } from '../../lib/maps';\n\nimport YaMapModal from '../YaMapModal';\nimport Image from '../Image';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    coordinates: Coordinates;\n    metro: Metro[] | null;\n    address: string | null;\n};\n\nconst YaMapWidget: React.FC<Props> = props => {\n    const staticMapImage = {\n        url: getStaticMapUrl({\n            size: [650, 176],\n            z: 16,\n            pt: [props.coordinates.longitude, props.coordinates.latitude, 'pm2rdl'],\n        }),\n        width: 650,\n        height: 176,\n    };\n\n    const [isModalOpen, setModalOpen] = useState(false);\n\n    const onMapClick = useCallback(() => {\n        setModalOpen(true);\n\n        document.body.style.overflow = 'hidden';\n    }, []);\n\n    const onBackClick = useCallback(() => {\n        setModalOpen(false);\n\n        document.body.style.overflow = 'auto';\n    }, []);\n\n    return (\n        <>\n            <div onClick={onMapClick}>\n                <Image className={styles.map} src={staticMapImage} />\n            </div>\n            {isModalOpen && <YaMapModal {...props} onBackClick={onBackClick} />}\n        </>\n    );\n};\n\nexport default YaMapWidget;\n","import React from 'react';\n\nimport YaMapWidget from '../../../../components/YaMapWidget';\nimport { ScheduleInfo } from '../../../../redux/slices/event';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    schedule: Partial<ScheduleInfo>;\n};\n\nconst VenueInfo: React.FC<Props> = ({ schedule }) => {\n    const { oneOfPlaces, placePreview } = schedule;\n\n    if (!oneOfPlaces || !oneOfPlaces.coordinates) {\n        return <div className={styles.title}>{placePreview}</div>;\n    }\n\n    return (\n        <>\n            <YaMapWidget\n                coordinates={oneOfPlaces.coordinates}\n                metro={oneOfPlaces.metro}\n                address={oneOfPlaces.address}\n            />\n            <div className={styles.title}>{oneOfPlaces.title}</div>\n            <div className={styles.address}>{oneOfPlaces.address}</div>\n        </>\n    );\n};\n\nexport default VenueInfo;\n","import React, { useEffect, Suspense, ReactElement, ReactNode } from 'react';\n\nimport LazyRender from '../LazyRender';\n\ntype Props = {\n    children: ReactNode;\n    fetchData?: () => void;\n    skeleton?: ReactElement;\n};\n\nconst LazyBlock: React.FC<Props> = ({ children, skeleton, fetchData }) => {\n    return (\n        <LazyRender skeleton={skeleton}>\n            <Inner children={children} skeleton={skeleton} fetchData={fetchData} />\n        </LazyRender>\n    );\n};\n\nconst Inner: React.FC<Props> = ({ children, skeleton, fetchData }) => {\n    useEffect(() => {\n        fetchData && fetchData();\n    }, [fetchData]);\n\n    return <Suspense fallback={skeleton || null}>{children}</Suspense>;\n};\n\nexport default LazyBlock;\n","import React, { memo } from 'react';\n\nimport { lazyDeferred } from '../../../../lib/lazy';\n\nimport LazyBlock from '../../../../components/LazyBlock';\nimport RecommendedEventsSkeleton from './Skeleton';\n\nconst Component = lazyDeferred(() =>\n    import(\n        /* webpackChunkName: \"recommended-events\" */\n        './Component'\n    )\n);\n\nconst RecommendedEventsLazyBlock: React.FC = () => {\n    return (\n        <LazyBlock skeleton={<RecommendedEventsSkeleton />}>\n            <Component skeleton={<RecommendedEventsSkeleton />} />\n        </LazyBlock>\n    );\n};\n\nexport default memo(RecommendedEventsLazyBlock);\n","import React, { ReactElement, useRef, MutableRefObject } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { RootReducer } from '../../redux';\nimport { Event, EventPage, ScheduleInfo } from '../../redux/slices/event';\n\nimport PageHeader from '../../components/PageHeader';\nimport Gallery from '../../components/Gallery';\nimport CollapsedText from '../../components/CollapsedText';\n\nimport { useScreenRef } from '../../components/StackNavigator';\nimport { useScrollEffect } from '../../hooks/useScrollEffect';\nimport { isIOS } from '../../lib/is-ios';\nimport Title from './components/Title';\nimport ContentBlock from './components/ContentBlock';\nimport Cover from './components/Cover';\nimport TicketButton from './components/TicketButton';\nimport VenueInfo from './components/VenueInfo';\nimport RecommendedEventsLazyBlock from './components/RecommendedEvents';\n\nimport styles from './styles.module.css';\n\ntype Props = {\n    id: string;\n    skeleton: ReactElement;\n};\n\nconst isScrollAtTop = (ref: React.MutableRefObject<HTMLDivElement | null>) => {\n    if (isIOS()) {\n        return window.scrollY <= 0;\n    }\n\n    return !ref.current || ref.current?.scrollTop <= 0;\n};\n\nconst Component: React.FC<Props> = ({ id, skeleton }) => {\n    const mainImageRef = useRef<HTMLDivElement | null>(null);\n    const screenRef = useScreenRef();\n    const documentRef = useRef(document);\n    const scrollableRef: MutableRefObject<EventTarget | null> = isIOS() ? documentRef : screenRef;\n\n    const eventPage: Partial<EventPage> = useSelector((state: RootReducer) => state.event.data[id]) || {};\n    const event = (eventPage.event || {}) as Event;\n    const schedule = (eventPage.schedule || {}) as ScheduleInfo;\n    const isLoading = !event.id;\n\n    const { images, description, type, tickets } = event;\n    const { preview } = schedule;\n    const ticket = tickets && tickets[0];\n\n    const isPageHeaderClear = useScrollEffect(scrollableRef, screenRef, isScrollAtTop);\n\n    if (isLoading) {\n        return skeleton;\n    }\n\n    return (\n        <>\n            <PageHeader\n                mods={isPageHeaderClear ? 'clear' : ''}\n                backward={isPageHeaderClear ? 'white' : 'black'}\n                hasLogo={false}\n                hasMenu={false}\n            />\n\n            <Cover event={event} imageRef={mainImageRef} />\n\n            <div className={styles.wrapper}>\n                <TicketButton event={event} />\n\n                {type && <div className={styles.city}>{type.name} в Москве</div>}\n                {preview && <div className={styles.schedule}>{preview.text}</div>}\n\n                <ContentBlock>\n                    <VenueInfo schedule={schedule} />\n                </ContentBlock>\n\n                {images && images.length > 0 && (\n                    <ContentBlock>\n                        <Title>Фотогалерея</Title>\n                        <Gallery items={images} />\n                    </ContentBlock>\n                )}\n\n                {description && (\n                    <ContentBlock>\n                        <Title>Описание</Title>\n                        <CollapsedText lines={5} className={styles.description} fullTextLabel={'Полное описание'}>\n                            {description}\n                        </CollapsedText>\n                    </ContentBlock>\n                )}\n\n                <RecommendedEventsLazyBlock />\n\n                {ticket && <div className={styles.placeholder} />}\n            </div>\n        </>\n    );\n};\n\nexport default Component;\n"],"sourceRoot":""}